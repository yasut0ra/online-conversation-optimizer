<div
  class="candidate-list"
  id="candidate-list"
  data-session-id="{{ session_id }}"
  data-turn-id="{{ turn_id }}"
  data-propensities='{{ propensities | tojson }}'
  data-scores='{{ scores | tojson }}'
>
  {% for candidate in candidates %}
  <div
    class="candidate-card"
    data-index="{{ candidate.index }}"
    data-candidate='{{ candidate | tojson }}'
  >
    <div class="candidate-header">
      <span class="candidate-style">{{ candidate.style }}</span>
      <span class="candidate-score">Score: {{ '{:.3f}'.format(candidate.score) }}</span>
    </div>
    <p class="candidate-text">{{ candidate.text }}</p>
    <div class="candidate-meta">
      <span>Propensity: {{ '{:.3f}'.format(candidate.propensity) }}</span>
      {% if candidate.safety_score is not none %}
      <span>Safety: {{ '{:.2f}'.format(candidate.safety_score) }}</span>
      {% endif %}
    </div>
    {% if candidate.features %}
    <details class="candidate-features">
      <summary>特徴量を表示</summary>
      <ul>
        {% for key, value in candidate.features.items() %}
        <li><span class="feature-key">{{ key }}</span><span class="feature-value">{{ value }}</span></li>
        {% endfor %}
      </ul>
    </details>
    {% endif %}
  </div>
  {% endfor %}
</div>
